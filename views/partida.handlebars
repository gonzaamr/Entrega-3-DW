<body>
  <a id="v" href="pp">‚¨Ö Volver</a>
  <div class="contenido-ajedrez">
    <div class="player1">  
      <div class="cuadro c1">
        <div class="foto_partida foto_blanca">‚ôü</div>
        <div class="nombre_partida">Piezas blancas</div>
      </div>
      <section class="movimientos">
          <h3>Movimientos</h3>
            <ul id="m1">
            </ul>
      </section> 
      <div class="bandeja-capturas negras">
        <h4>Capturadas Negras</h4>
        <div id="bandeja-negras"></div>
      </div>
    </div>
    <main>
      <h1>Partida en curso</h1>
     <div class="tablero" id="tablero"></div>
      <div class="info-partida">
        <p class="turno"><strong>Turno de:</strong> <span class="player"></span></p>
        <div class="acciones">
            <button id="rendirse" >Rendirse</button>
            <button id="empatar" >Empatar</button>
        </div>
      </div>
    </main>
    <div class="player2">
      <div class="cuadro c2">
        <div class="foto_partida foto_negra">‚ôü</div>
        <div class="nombre_partida">Piezas negras</div> 
      </div>
      <section class="movimientos">
          <h3>Movimientos</h3>
            <ul id="m2">
            </ul>
      </section> 
      <div class="bandeja-capturas blancas">
        <h4>Capturadas Blancas</h4>
        <div id="bandeja-blancas"></div>
      </div>
  </div>
  <script>
    function insertarBotonInvitacion(partidaId) {
  const acciones = document.querySelector(".acciones");
  if (!acciones) return;

  // Evita duplicar el bot√≥n
  if (document.querySelector(".contenedor-invitacion")) return;

  const contenedor = document.createElement("div");
  contenedor.className = "contenedor-invitacion";

  const botonMostrar = document.createElement("button");
  botonMostrar.textContent = "üì® Invitar a un jugador";
  botonMostrar.className = "boton-invitacion";

  const form = document.createElement("div");
  form.className = "formulario-invitacion";
  form.style.display = "none";

  const input = document.createElement("input");
  input.type = "email";
  input.placeholder = "Correo del jugador";
  input.id = "correo-invitado";

  const botonEnviar = document.createElement("button");
  botonEnviar.textContent = "Enviar";
  botonEnviar.className = "boton-enviar-invitacion";

  botonMostrar.onclick = () => {
    form.style.display = form.style.display === "none" ? "flex" : "none";
  };

  botonEnviar.onclick = async () => {
    const correo = input.value.trim();
    if (!correo) return alert("Ingresa un correo v√°lido");

    try {
      const res = await fetch("/api/invitar", {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ correo, partidaId })
      });

      const data = await res.json();
      if (res.ok) {
        alert("Invitaci√≥n enviada");
      } else {
        alert("Error: " + data.error);
      }
    } catch (err) {
      console.error(err);
      alert("Error al enviar la invitaci√≥n");
    }
  };

  form.appendChild(input);
  form.appendChild(botonEnviar);

  contenedor.appendChild(botonMostrar);
  contenedor.appendChild(form);
  acciones.appendChild(contenedor);
}
  </script>
</body>